@if (ActiveProfile != null)
{
    <div class="rockefeller-profile-overview-container">
        <div class="rockefeller-profile-overview-header">
            <h3 class="rockefeller-profile-overview-title">
                <MudIcon Icon="@Icons.Material.Filled.Person" Size="Size.Small"
                         class="rockefeller-profile-overview-icon"/>
                Active Profile: @(ActiveProfile?.Name ?? "Unknown")
            </h3>
            <MudButton Variant="Variant.Outlined"
                       Color="Color.Secondary"
                       OnClick="OnManageSymbolsRequested"
                       StartIcon="@Icons.Material.Filled.Tune"
                       Size="Size.Small"
                       Class="rockefeller-btn-outline rockefeller-btn-sm">
                Manage Symbols
            </MudButton>
        </div>

        <!-- Profile Metrics Grid -->
        <div class="rockefeller-profile-overview-grid">
            <div class="rockefeller-profile-overview-metric">
                <div class="rockefeller-profile-overview-metric-icon">
                    <MudIcon Icon="@Icons.Material.Filled.AccountBalance" Size="Size.Small"/>
                </div>
                <div class="rockefeller-profile-overview-metric-content">
                    <div class="rockefeller-profile-overview-metric-label">Max Budget</div>
                    <div class="rockefeller-profile-overview-metric-value rockefeller-portfolio-value">
                        $@(ActiveProfile?.MaxBudget.ToString("N2") ?? "0.00")
                    </div>
                </div>
            </div>

            <div class="rockefeller-profile-overview-metric">
                <div class="rockefeller-profile-overview-metric-icon">
                    <MudIcon Icon="@Icons.Material.Filled.ShowChart" Size="Size.Small"/>
                </div>
                <div class="rockefeller-profile-overview-metric-content">
                    <div class="rockefeller-profile-overview-metric-label">Active Symbols</div>
                    <div class="rockefeller-profile-overview-metric-value">
                        @(ActiveProfile?.SymbolSettings?.Values?.Count(s => s.IsActive) ?? 0)
                    </div>
                </div>
            </div>

            <div class="rockefeller-profile-overview-metric">
                <div class="rockefeller-profile-overview-metric-icon">
                    <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Size="Size.Small"/>
                </div>
                <div class="rockefeller-profile-overview-metric-content">
                    <div class="rockefeller-profile-overview-metric-label">Total Allocation</div>
                    <div class="rockefeller-profile-overview-metric-value">
                        @(ActiveProfile?.SymbolSettings?.Values?.Where(s => s.IsActive)?.Sum(s => s.BudgetAllocation * 100).ToString("N1") ?? "0.0")%
                    </div>
                </div>
            </div>

            <div class="rockefeller-profile-overview-metric">
                <div class="rockefeller-profile-overview-metric-icon">
                    <MudIcon Icon="@Icons.Material.Filled.CalendarToday" Size="Size.Small"/>
                </div>
                <div class="rockefeller-profile-overview-metric-content">
                    <div class="rockefeller-profile-overview-metric-label">Created</div>
                    <div class="rockefeller-profile-overview-metric-value">
                        @(ActiveProfile?.CreatedAt.ToString("MMM dd, yyyy") ?? "Unknown")
                    </div>
                </div>
            </div>
        </div>


    </div>
}

@code {
    [Parameter] public TradingProfile? ActiveProfile { get; set; }
    [Parameter] public EventCallback OnManageSymbolsRequested { get; set; }
}


